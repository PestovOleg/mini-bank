# mini-bank

## Содержимое

- [ТЗ](#тз)
- [Юзкейсы](#юзкейсы)
- [Пререквизиты](#пререквизиты)
- [Endpoints](#endpoints-v1)

## ТЗ
### Юзкейсы

    1. Я как пользователь хочу стать клиентом банка (регистрация)
    2. Я как клиент, хочу открыть счет
    3. Я как пользователь хочу пополнить счет под %
    4. Я как пользователь хочу видеть все свои счета

### Реализация

    1. [ ]Фичи реализуются 2 CRUD сервисами на Golang
        - Сервис 1 имеет REST API интерфейс
            - Create - создание пользователя ФИО, username, email, пароль
            - Read - поиск пользователя в базе
            - Update - обновление какой-либо информации пользователя
            - Delete - удаление пользователя из базы
        - Сервис 2 имеет REST API интерфейс
            - Create - создание счета пользователя 20 знаков
            - Read - получения счета, списка счетов пользователя
            - Update - обновления информации о счете
            - Delete - удаление счета
    2. [ ]Каждая фича закрывается feature toggle
    3. [ ]Информация о пользователях и счетах хранится в базе/базах PostgreSQL
    4. [x]Код сервисов хранится в GIT
    5. [x]Разработка ведется по GitFlow
    6. [ ]Код бизнес логики сервисов покрывается Unit тестани
    7. [x]Код сервисов заворачивается в Dockeг образы
    8. [x]Сборка кода и деплой осуществляется автоматизированным DevOps Pipeline на выбранный хостинг
    9. [x]Деплой новых версий необходимо реализовать через Blue Green deployment
    10.[x]Обращение к сервисам осуществляется через прикладной балансировщик

   
## Пререквизиты
### Github variables

    | VARIABLE    |                                         |
    | ----------- | --------------------------------------- |
    | CONFIG_PATH | Путь к конфигу на сервере               |
    | SECRET_PATH | Путь к секретам на сервере (БД и т.д.)  |

### Github secrets

    | VARIABLE              |                               |
    | --------------------- | ----------------------------- |
    | DOCKERHUB_TOKEN       | токен docker registry         |
    | DOCKERHUB_USERNAME    | user dockerhub registry       |
    | SSH_PRIVATE_KEY       |                               |
    | SSH_SERVER_IP         | ip где разворачиваем          |
    | SSH_SERVER_USER       |                               |


### На стороне сервера

    | CONFIG      |                                             |
    | ----------- | ------------------------------------------- |
    | CONFIG_PATH | Путь к конфигу (-см. Variables)             |
    | SECRET_PATH | Путь к секретам на сервере (-см. Variables) |

## Endpoints (v1):

    - /v1/health-check  //проверка состояния сервера